<!DOCTYPE html>
<html>
  <head>
    <title>My 1st Angular App</title>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"
      rel="stylesheet">
    <script src="../node_modules/angular/angular.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.14/angular-ui-router.min.js"></script>
    <script src="js/app.js"></script>
    <style> .glyphicon-thumbs-up {cursor:pointer} </style>
  </head>
  <body ng-app="andyNews">

    <section class="row">

      <section class="col-md-6 col-md-offset-3">
        <ui-view></ui-view>
      </section>

    </section>

    <script type="text/ng-template" id="/home.html">
      <section class="page-header">
        <h1>Andys 1st Angular App</h1>
      </section>

      <section class="page-header" id="welcome">
        <h1>{{test}}</h1>
      </section>

      <section id="add-new-post" style="margin-top:30px;">
        <form ng-submit="addPost()">
          <h3>Add a new post</h3>
          <section class="form-group">
            <input id="new-post-title" type="text" ng-model="title"
                    class="form-control" placeholder="Title"></input>
          </section>
          <section class="form-group">
          <input id="new-post-link" type="text" ng-model="link"
                  class="form-control" placeholder="Link"></input>
          </section>
          <button id="add-post-button" type="submit" class="btn btn-primary">
            Post</button>
        </form>
      </section>

      <section ng-repeat="post in posts | index | orderBy: '-upvotes'">
        <p>Title: <span>{{post.title}}</span>
          <span style="font-size:20px; margin-left:10px;"
           ng-show="post.link">Link: <a href="{{post.link}}">{{post.link}}</a>
          </span>
           upvotes: <span>{{post.upvotes}} </span>
          <span class="glyphicon glyphicon-thumbs-up"
            ng-click="incrementUpvotes(post)"></span>
          <span><a class="link-to-post" href="#/posts/{{post.index}}">
            comments</a></span>
        </p>
      </section>
    </script>

    <script type="text/ng-template" id="/posts.html">
      <section class="page-header">
        <h3>
          {{post.title}}
          <a ng-show="post.link" href="{{post.link}}">{{post.link}}</a>
        </h3>
      </section>

      <section class="add-comment-form">
        <form ng-submit="addComment()" style="margin-top:30px;">
          <h3>Add a new comment</h3>
          <section class="form-group">
            <input type="text" class="form-control" placeholder="Comment"
              ng-model="body"></input>
          </section>
          <button type="submit" id="post-comment-button"class="btn btn-primary">
            Post</button>
        </form>
      </section>

      <section ng-repeat="comment in post.comments | orderBy:'-upvotes'">
        <span style="font-size:20px; margin-left:10px;">{{comment.body}}</span>
         - by {{comment.author}}, upvotes: <span>{{comment.upvotes}}</span>
        <span class="glyphicon glyphicon-thumbs-up"
          ng-click="incrementCommentUpvotes(comment)"></span>
      </section>
    </script>

  </body>
</html>
